<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediHub – Hospital Management System</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link href="/static/custom.css?v=3" rel="stylesheet">
    <style>
        /* css to prevent vuejs template flashing issue */
        [v-cloak] {
            display: none !important;
        }
    </style>
</head>
<body>
    <div id="app" v-cloak>
        <!-- Navigation -->
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary p-3 shadow-sm" v-if="currentUser">
            <div class="container">
                <a class="navbar-brand fw-bold fs-4" href="#">
                    <i class="bi bi-hospital-fill me-2"></i>MediHub
                </a>
                <div class="navbar-nav ms-auto gap-2">
                    <button v-if="currentUser && currentUser.role !== 'admin'" 
                            class="btn btn-outline-light btn-sm px-3 rounded-pill" 
                            @click="openProfilePage()">
                        <i class="bi bi-person-gear me-1"></i> Edit Profile
                    </button>
                    <button class="btn btn-light btn-sm px-3 rounded-pill fw-bold text-primary" @click="logout">
                        <i class="bi bi-box-arrow-right me-1"></i> Logout
                    </button>
                </div>
            </div>
        </nav>

        <!-- Main Content -->
        <div class="container-fluid" :class="{'pt-4': currentUser, 'p-0': !currentUser}">
            <!-- Messages -->
            <div v-if="error" class="alert alert-danger alert-dismissible fade show m-3 position-fixed top-0 start-50 translate-middle-x z-3" style="min-width: 300px;">
                {{ error }}
                <button type="button" class="btn-close" @click="error = null"></button>
            </div>
            <div v-if="success" class="alert alert-success alert-dismissible fade show m-3 position-fixed top-0 start-50 translate-middle-x z-3" style="min-width: 300px;">
                {{ success }}
                <button type="button" class="btn-close" @click="success = null"></button>
            </div>

            <!-- Homepage -->
            <div v-if="!currentUser && currentView === 'home'" class="homepage">
                <!-- Floating Header -->
                <nav class="navbar navbar-expand-lg navbar-dark fixed-top p-3 floating-navbar">
                    <div class="container">
                        <a class="navbar-brand fw-bold fs-3" href="#">
                            <i class="bi bi-hospital-fill me-2"></i>MediHub
                        </a>
                        <div class="d-flex gap-2">
                            <button class="btn btn-outline-light rounded-pill px-4" @click="currentView = 'login'">Login</button>
                        </div>
                    </div>
                </nav>

                <!-- Hero Section -->
                <section class="hero-section position-relative overflow-hidden">
                    <div class="hero-bg-shapes">
                        <div class="shape shape-1"></div>
                        <div class="shape shape-2"></div>
                    </div>
                    <div class="container position-relative z-1">
                        <div class="row align-items-center min-vh-100 py-5">
                            <div class="col-lg-10 mx-auto text-white hero-content pt-5 text-center">
                                <div class="mb-4 fade-in-up" style="animation-delay: 0.1s;">
                                    <span class="badge glass-badge px-4 py-2 rounded-pill fs-6">
                                        <i class="bi bi-stars me-2 text-warning"></i>Trusted by 10,000+ Patients
                                    </span>
                                </div>
                                <h1 class="display-3 fw-bold mb-4 fade-in-up" style="animation-delay: 0.2s; font-style: italic; letter-spacing: -1px;">
                                    Your Health, <span class="text-gradient-gold">Our Priority</span>
                                </h1>
                                <p class="lead mb-4 text-white fade-in-up mx-auto" style="max-width: 650px; animation-delay: 0.3s; font-size: 1.2rem; opacity: 0.9;">
                                    Experience seamless healthcare management with smart appointments, secure records, and expert care—all in one place.
                                </p>
                                <div class="d-flex gap-3 justify-content-center mb-5 fade-in-up flex-wrap" style="animation-delay: 0.4s;">
                                    <button class="btn btn-light px-4 py-2 rounded-pill shadow-lg hover-scale" @click="currentView = 'register'">
                                        <i class="bi bi-calendar-plus me-2"></i>
                                        <span class="fw-bold text-primary">Book Appointment</span>
                                    </button>
                                    <button class="btn btn-outline-light px-4 py-2 rounded-pill hover-scale" onclick="document.getElementById('features').scrollIntoView({behavior: 'smooth'})">
                                        <span class="fw-bold">Explore Features</span>
                                        <i class="bi bi-arrow-right ms-2"></i>
                                    </button>
                                </div>
                                
                                <!-- Trust Indicators -->
                                <div class="row justify-content-center fade-in-up mt-4" style="animation-delay: 0.5s;">
                                    <div class="col-lg-10">
                                        <div class="glass-card p-4 rounded-5 d-flex justify-content-around align-items-center flex-wrap gap-4">
                                            <div class="text-center">
                                                <div class="h3 fw-bold mb-0">10k+</div>
                                                <div class="small text-white-50">Patients</div>
                                            </div>
                                            <div class="vr bg-white opacity-25 d-none d-md-block"></div>
                                            <div class="text-center">
                                                <div class="h3 fw-bold mb-0">50+</div>
                                                <div class="small text-white-50">Doctors</div>
                                            </div>
                                            <div class="vr bg-white opacity-25 d-none d-md-block"></div>
                                            <div class="text-center">
                                                <div class="h3 fw-bold mb-0">4.9/5</div>
                                                <div class="small text-white-50">Rating</div>
                                            </div>
                                            <div class="vr bg-white opacity-25 d-none d-md-block"></div>
                                            <div class="text-center">
                                                <div class="h3 fw-bold mb-0">24/7</div>
                                                <div class="small text-white-50">Support</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="wave-bottom">
                        <svg viewBox="0 0 1440 320" xmlns="http://www.w3.org/2000/svg">
                            <path fill="#f8f9fa" fill-opacity="1" d="M0,96L48,112C96,128,192,160,288,160C384,160,480,128,576,112C672,96,768,96,864,112C960,128,1056,160,1152,160C1248,160,1344,128,1392,112L1440,96L1440,320L1392,320C1344,320,1248,320,1152,320C1056,320,960,320,864,320C768,320,672,320,576,320C480,320,384,320,288,320C192,320,96,320,48,320L0,320Z"></path>
                        </svg>
                    </div>
                </section>

                <!-- Features Section -->
                <section id="features" class="py-6 bg-light position-relative">
                    <div class="container py-5">
                        <div class="text-center mb-5">
                            <span class="text-primary fw-bold text-uppercase tracking-wider">Why Choose MediHub</span>
                            <h2 class="display-5 fw-bold mt-2 mb-3">Complete Healthcare Solutions</h2>
                            <p class="lead text-muted mx-auto" style="max-width: 600px;">
                                Empowering healthcare providers and patients with cutting-edge technology for better outcomes.
                            </p>
                        </div>
                        <div class="row g-4">
                            <div class="col-md-4">
                                <div class="feature-card h-100 p-4 bg-white rounded-4 shadow-sm hover-lift-lg border-bottom-primary">
                                    <div class="icon-wrapper mb-4 bg-primary bg-opacity-10 text-primary rounded-circle">
                                        <i class="bi bi-calendar-check"></i>
                                    </div>
                                    <h4 class="fw-bold mb-3">Smart Scheduling</h4>
                                    <p class="text-muted mb-0">
                                        AI-powered appointment management system that reduces wait times and optimizes doctor availability.
                                    </p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="feature-card h-100 p-4 bg-white rounded-4 shadow-sm hover-lift-lg border-bottom-success">
                                    <div class="icon-wrapper mb-4 bg-success bg-opacity-10 text-success rounded-circle">
                                        <i class="bi bi-shield-lock"></i>
                                    </div>
                                    <h4 class="fw-bold mb-3">Secure Records</h4>
                                    <p class="text-muted mb-0">
                                        Bank-grade encryption for all patient data. HIPAA compliant storage ensures your medical history is safe.
                                    </p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="feature-card h-100 p-4 bg-white rounded-4 shadow-sm hover-lift-lg border-bottom-info">
                                    <div class="icon-wrapper mb-4 bg-info bg-opacity-10 text-info rounded-circle">
                                        <i class="bi bi-graph-up-arrow"></i>
                                    </div>
                                    <h4 class="fw-bold mb-3">Real-time Analytics</h4>
                                    <p class="text-muted mb-0">
                                        Comprehensive dashboards for doctors and admins to track patient progress and clinic performance.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- How It Works Section -->
                <section class="py-6 bg-white">
                    <div class="container py-5">
                        <div class="row align-items-center">
                            <div class="col-lg-6 mb-5 mb-lg-0">
                                <div class="position-relative">
                                    <div class="blob-bg"></div>
                                    <img src="https://images.unsplash.com/photo-1576091160399-112ba8d25d1d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                                         alt="Doctor using tablet" 
                                         class="img-fluid rounded-4 shadow-lg position-relative z-1">
                                    <div class="experience-badge position-absolute bottom-0 end-0 bg-white p-4 rounded-4 shadow-lg m-4 z-2">
                                        <div class="d-flex align-items-center gap-3">
                                            <div class="display-4 fw-bold text-primary">15+</div>
                                            <div class="lh-sm">
                                                <div class="fw-bold">Years of</div>
                                                <div class="text-muted">Excellence</div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 ps-lg-5">
                                <span class="text-primary fw-bold text-uppercase tracking-wider">Simple Process</span>
                                <h2 class="display-5 fw-bold mt-2 mb-4">Your Journey to Better Health</h2>
                                
                                <div class="step-list">
                                    <div class="step-item d-flex gap-4 mb-4">
                                        <div class="step-number bg-primary text-white rounded-circle d-flex align-items-center justify-content-center flex-shrink-0">
                                            1
                                        </div>
                                        <div>
                                            <h5 class="fw-bold">Create Your Profile</h5>
                                            <p class="text-muted">Sign up in seconds with our streamlined registration process. Your health journey starts here.</p>
                                        </div>
                                    </div>
                                    <div class="step-item d-flex gap-4 mb-4">
                                        <div class="step-number bg-primary text-white rounded-circle d-flex align-items-center justify-content-center flex-shrink-0">
                                            2
                                        </div>
                                        <div>
                                            <h5 class="fw-bold">Book an Appointment</h5>
                                            <p class="text-muted">Browse top specialists, check real-time availability, and book a slot that works for you.</p>
                                        </div>
                                    </div>
                                    <div class="step-item d-flex gap-4">
                                        <div class="step-number bg-primary text-white rounded-circle d-flex align-items-center justify-content-center flex-shrink-0">
                                            3
                                        </div>
                                        <div>
                                            <h5 class="fw-bold">Receive Care</h5>
                                            <p class="text-muted">Consult with your doctor and access your prescriptions and reports instantly on your dashboard.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- CTA Section -->
                <section class="py-6 position-relative overflow-hidden bg-dark text-white">
                    <div class="absolute-bg" style="background: linear-gradient(45deg, #134e4a 0%, #115e59 100%);"></div>
                    <div class="container position-relative z-1 py-5 text-center">
                        <h2 class="display-4 fw-bold mb-4">Ready to Transform Your Healthcare Experience?</h2>
                        <p class="lead mb-5 text-white-50 mx-auto" style="max-width: 700px;">
                            Join thousands of satisfied patients and healthcare providers who trust MediHub.
                        </p>
                        <div class="d-flex gap-3 justify-content-center">
                            <button class="btn btn-primary btn-lg px-5 py-3 rounded-pill shadow-lg hover-scale" @click="currentView = 'register'">
                                <span class="fw-bold">Join MediHub Now</span>
                            </button>
                        </div>
                    </div>
                </section>

                <!-- Footer -->
                <footer class="bg-white pt-5 pb-3 border-top">
                    <div class="container">
                        <div class="row g-4 mb-5">
                            <div class="col-lg-4">
                                <a class="navbar-brand d-flex align-items-center gap-2 mb-3 text-primary fw-bold fs-4" href="#">
                                    <i class="bi bi-hospital-fill"></i> MediHub
                                </a>
                                <p class="text-muted">
                                    Leading the way in digital healthcare management. Making quality care accessible to everyone, everywhere.
                                </p>
                                <div class="d-flex gap-3">
                                    <a href="#" class="btn btn-light rounded-circle"><i class="bi bi-facebook"></i></a>
                                    <a href="#" class="btn btn-light rounded-circle"><i class="bi bi-twitter-x"></i></a>
                                    <a href="#" class="btn btn-light rounded-circle"><i class="bi bi-linkedin"></i></a>
                                    <a href="#" class="btn btn-light rounded-circle"><i class="bi bi-instagram"></i></a>
                                </div>
                            </div>
                            <div class="col-lg-2 col-6">
                                <h6 class="fw-bold mb-3">Platform</h6>
                                <ul class="list-unstyled text-muted">
                                    <li class="mb-2"><a href="#" class="text-decoration-none text-muted hover-primary">About Us</a></li>
                                    <li class="mb-2"><a href="#" class="text-decoration-none text-muted hover-primary">Features</a></li>
                                    <li class="mb-2"><a href="#" class="text-decoration-none text-muted hover-primary">Doctors</a></li>
                                    <li class="mb-2"><a href="#" class="text-decoration-none text-muted hover-primary">Pricing</a></li>
                                </ul>
                            </div>
                            <div class="col-lg-2 col-6">
                                <h6 class="fw-bold mb-3">Support</h6>
                                <ul class="list-unstyled text-muted">
                                    <li class="mb-2"><a href="#" class="text-decoration-none text-muted hover-primary">Help Center</a></li>
                                    <li class="mb-2"><a href="#" class="text-decoration-none text-muted hover-primary">Privacy Policy</a></li>
                                    <li class="mb-2"><a href="#" class="text-decoration-none text-muted hover-primary">Terms of Service</a></li>
                                    <li class="mb-2"><a href="#" class="text-decoration-none text-muted hover-primary">Contact</a></li>
                                </ul>
                            </div>
                            <div class="col-lg-4">
                                <h6 class="fw-bold mb-3">Newsletter</h6>
                                <p class="text-muted small">Subscribe to get the latest healthcare updates.</p>
                                <div class="input-group mb-3">
                                    <input type="text" class="form-control" placeholder="Enter your email">
                                    <button class="btn btn-primary" type="button">Subscribe</button>
                                </div>
                            </div>
                        </div>
                        <div class="border-top pt-3 text-center text-muted small">
                            <p class="mb-0">&copy; 2025 MediHub. All rights reserved.</p>
                        </div>
                    </div>
                </footer>
            </div>

            <!-- profile edit -->
            <div v-if="currentUser && appView === 'profile'" class="container my-4">
                <button class="btn btn-outline-secondary mb-3" @click="openDashboard()">
                    <i class="bi bi-arrow-left"></i> Back to Dashboard
                </button>
                <div class="card">
                    <div class="card-header d-flex align-items-center">
                        <i class="bi bi-person-gear me-2"></i>
                        <h5 class="mb-0">Edit Profile</h5>
                    </div>
                    <div class="card-body">
                        <form @submit.prevent="updateProfile">
                            <div class="row">
                                <div class="col-md-6" v-if="currentUser.role === 'doctor'">
                                    <div class="mb-3">
                                        <label for="profile_name" class="form-label">Full Name</label>
                                        <input type="text" class="form-control" id="profile_name" v-model="profileForm.name" required>
                                    </div>
                                </div>
                                <div class="col-md-6" v-if="currentUser.role === 'patient'">
                                    <div class="mb-3">
                                        <label for="patient_name" class="form-label">Full Name</label>
                                        <input type="text" class="form-control" id="patient_name" v-model="profileForm.name" required>
                                    </div>
                                </div>
                                <div class="col-md-6" v-if="currentUser.role === 'patient'">
                                    <div class="mb-3">
                                        <label for="patient_email" class="form-label">Email</label>
                                        <input type="email" class="form-control" id="patient_email" v-model="profileForm.email" required>
                                    </div>
                                </div>
                                <div class="col-md-6" v-if="currentUser.role === 'doctor'">
                                    <div class="mb-3">
                                        <label for="profile_department" class="form-label">Department</label>
                                        <input type="text" class="form-control" id="profile_department" v-model="profileForm.department" required>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="profile_phone" class="form-label">Phone</label>
                                        <input type="tel" class="form-control" id="profile_phone" v-model="profileForm.phone">
                                    </div>
                                </div>
                                <div class="col-md-6" v-if="currentUser.role === 'doctor'">
                                    <div class="mb-3">
                                        <label for="profile_experience" class="form-label">Experience (years)</label>
                                        <input type="number" class="form-control" id="profile_experience" v-model="profileForm.experience" min="0" required>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="row" v-if="currentUser.role === 'doctor'">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="profile_qualification" class="form-label">Qualification</label>
                                        <input type="text" class="form-control" id="profile_qualification" v-model="profileForm.qualification" required>
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="profile_consultation_fee" class="form-label">Consultation Fee</label>
                                        <input type="number" step="0.01" class="form-control" id="profile_consultation_fee" v-model="profileForm.consultation_fee" required>
                                    </div>
                                </div>
                            </div>

                            <div class="row" v-if="currentUser.role === 'patient'">
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="patient_age" class="form-label">Age</label>
                                        <input type="number" class="form-control" id="patient_age" v-model="profileForm.age" min="0" max="120">
                                    </div>
                                </div>
                                <div class="col-md-6">
                                    <div class="mb-3">
                                        <label for="patient_gender" class="form-label">Gender</label>
                                        <select class="form-select" id="patient_gender" v-model="profileForm.gender">
                                            <option value="">Select Gender</option>
                                            <option value="Male">Male</option>
                                            <option value="Female">Female</option>
                                            <option value="Other">Other</option>
                                        </select>
                                    </div>
                                </div>
                            </div>

                            <div class="row" v-if="currentUser.role === 'patient'">
                                <div class="col-12">
                                    <div class="mb-3">
                                        <label for="patient_address" class="form-label">Address</label>
                                        <textarea class="form-control" id="patient_address" v-model="profileForm.address" rows="2"></textarea>
                                    </div>
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary" :disabled="loading">
                                <span v-if="loading" class="spinner-border spinner-border-sm me-2"></span>
                                Save Changes
                            </button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- login and registration form -->
            <div v-if="!currentUser && (currentView === 'login' || currentView === 'register')" class="auth-container min-vh-100 d-flex align-items-center bg-light">
                <div class="container-fluid p-0 h-100">
                    <div class="row g-0 min-vh-100">
                        <!-- Branding Side -->
                        <div class="col-lg-6 d-none d-lg-flex flex-column justify-content-center align-items-center text-white position-relative overflow-hidden" 
                             style="background: linear-gradient(135deg, #0f172a 0%, #020617 100%);">
                            <div class="hero-bg-shapes d-none">
                                <div class="shape shape-1"></div>
                                <div class="shape shape-2"></div>
                            </div>
                            <div class="position-relative z-1 text-center p-5">
                                <div class="mb-5">
                                    <i class="bi bi-hospital-fill" style="font-size: 5rem; opacity: 0.9;"></i>
                                </div>
                                <h1 class="display-3 fw-bold mb-4">
                                    Medi<span class="text-gradient-gold">Hub</span>
                                </h1>
                                <p class="lead text-white-50 mb-5" style="max-width: 450px; font-size: 1.1rem;">
                                    Modern Healthcare Management<br>Simplified for Everyone
                                </p>
                                <div class="d-flex gap-4 justify-content-center mt-5">
                                    <div class="text-center">
                                        <div class="h2 fw-bold mb-1">10k+</div>
                                        <div class="small text-white-50">Patients</div>
                                    </div>
                                    <div style="width: 1px; background: rgba(255,255,255,0.2);"></div>
                                    <div class="text-center">
                                        <div class="h2 fw-bold mb-1">100+</div>
                                        <div class="small text-white-50">Doctors</div>
                                    </div>
                                    <div style="width: 1px; background: rgba(255,255,255,0.2);"></div>
                                    <div class="text-center">
                                        <div class="h2 fw-bold mb-1">4.9/5</div>
                                        <div class="small text-white-50">Rating</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Form Side -->
                        <div class="col-lg-6 d-flex align-items-center justify-content-center bg-white position-relative">
                            <button @click="currentView = 'home'" class="btn btn-light position-absolute top-0 end-0 m-4 rounded-circle shadow-sm d-flex align-items-center justify-content-center" style="width: 40px; height: 40px; z-index: 10;" title="Back to Home">
                                <i class="bi bi-house-door-fill text-primary"></i>
                            </button>
                            <div class="w-100 p-4 p-md-5" style="max-width: 550px;">
                                <div class="text-center mb-4 d-lg-none">
                                    <h3 class="fw-bold text-primary"><i class="bi bi-hospital-fill me-2"></i>MediHub</h3>
                                </div>
                                
                                <!-- Login Form -->
                                <div v-if="currentView === 'login'" class="auth-form-wrapper fade-in-up">
                                    <div class="mb-5">
                                        <h3 class="fw-bold mb-2">Welcome Back!</h3>
                                        <p class="text-muted">Please enter your details to sign in.</p>
                                    </div>
                                    <form @submit.prevent="handleLogin">
                                        <div class="mb-4">
                                            <label for="username" class="form-label fw-medium">Username</label>
                                            <div class="input-group">
                                                <span class="input-group-text bg-light border-end-0"><i class="bi bi-person text-muted"></i></span>
                                                <input type="text" class="form-control bg-light border-start-0 ps-0" id="username" v-model="loginForm.username" placeholder="Enter your username" required>
                                            </div>
                                        </div>
                                        <div class="mb-4">
                                            <label for="password" class="form-label fw-medium">Password</label>
                                            <div class="input-group">
                                                <span class="input-group-text bg-light border-end-0"><i class="bi bi-lock text-muted"></i></span>
                                                <input type="password" class="form-control bg-light border-start-0 ps-0" id="password" v-model="loginForm.password" placeholder="Enter your password" required>
                                            </div>
                                        </div>
                                        <div class="d-flex justify-content-between align-items-center mb-4">
                                            <div class="form-check">
                                                <input class="form-check-input" type="checkbox" id="rememberMe">
                                                <label class="form-check-label text-muted small" for="rememberMe">Remember me</label>
                                            </div>
                                            <a href="#" class="text-primary text-decoration-none small fw-medium">Forgot Password?</a>
                                        </div>
                                        <button type="submit" class="btn btn-primary w-100 py-3 rounded-3 fw-bold shadow-sm mb-4" :disabled="loading">
                                            <span v-if="loading" class="spinner-border spinner-border-sm me-2"></span>
                                            Sign In
                                        </button>
                                    </form>
                                    <div class="text-center">
                                        <p class="text-muted mb-0">Don't have an account? 
                                            <a href="#" @click.prevent="currentView = 'register'" class="text-primary fw-bold text-decoration-none">Create Account</a>
                                        </p>
                                    </div>
                                </div>
                                
                                <!-- Registration Form -->
                                <div v-if="currentView === 'register'" class="auth-form-wrapper fade-in-up">
                                    <div class="mb-5">
                                        <h3 class="fw-bold mb-2">Create Account</h3>
                                        <p class="text-muted">Join MediHub for better healthcare management.</p>
                                    </div>
                                    <form @submit.prevent="handleRegister">
                                        <div class="mb-3">
                                            <label for="reg_name" class="form-label fw-medium">Full Name</label>
                                            <div class="input-group">
                                                <span class="input-group-text bg-light border-end-0"><i class="bi bi-person text-muted"></i></span>
                                                <input type="text" class="form-control bg-light border-start-0 ps-0" id="reg_name" v-model="registerForm.name" placeholder="Enter your name" required>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="reg_email" class="form-label fw-medium">Email Address</label>
                                            <div class="input-group">
                                                <span class="input-group-text bg-light border-end-0"><i class="bi bi-envelope text-muted"></i></span>
                                                <input type="email" class="form-control bg-light border-start-0 ps-0" id="reg_email" v-model="registerForm.email" placeholder="aman@medihub.com" required>
                                            </div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="reg_username" class="form-label fw-medium">Username</label>
                                            <div class="input-group">
                                                <span class="input-group-text bg-light border-end-0"><i class="bi bi-at text-muted"></i></span>
                                                <input type="text" class="form-control bg-light border-start-0 ps-0" id="reg_username" v-model="registerForm.username" placeholder="Choose a username" required>
                                            </div>
                                        </div>
                                        <div class="mb-4">
                                            <label for="reg_password" class="form-label fw-medium">Password</label>
                                            <div class="input-group">
                                                <span class="input-group-text bg-light border-end-0"><i class="bi bi-lock text-muted"></i></span>
                                                <input type="password" class="form-control bg-light border-start-0 ps-0" id="reg_password" v-model="registerForm.password" placeholder="Create a password" required>
                                            </div>
                                        </div>
                                        <button type="submit" class="btn btn-primary w-100 py-3 rounded-3 fw-bold shadow-sm mb-4" :disabled="loading">
                                            <span v-if="loading" class="spinner-border spinner-border-sm me-2"></span>
                                            Create Account
                                        </button>
                                    </form>
                                    <div class="text-center">
                                        <p class="text-muted mb-0">Already have an account? 
                                            <a href="#" @click.prevent="currentView = 'login'" class="text-primary fw-bold text-decoration-none">Sign In</a>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Admin Dashboard Component -->
            <admin-component
                v-if="currentUser && currentUser.role === 'admin' && appView === 'dashboard'"
                :current-user="currentUser">
            </admin-component>

            <!-- Doctor Dashboard Component -->
            <doctor-component
                v-if="currentUser && currentUser.role === 'doctor' && (appView === 'dashboard' || appView === 'treatment-management' || appView === 'patient-treatment-history')"
                :current-user="currentUser">
            </doctor-component>

            <!-- Patient Dashboard Component -->
            <patient-component 
                v-if="currentUser && currentUser.role === 'patient' && appView === 'dashboard'" 
                :current-user="currentUser">
            </patient-component>

        <!-- Complete Treatment Modal -->
        <div class="modal fade" id="completeTreatmentModal" tabindex="-1" aria-labelledby="completeTreatmentModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="completeTreatmentModalLabel">Complete Appointment</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form @submit.prevent="completeAppointmentWithTreatment()">
                            <div v-if="selectedAppointmentForTreatment" class="mb-3">
                                <p><strong>Patient:</strong> {{ selectedAppointmentForTreatment.patient ? selectedAppointmentForTreatment.patient.name : 'N/A' }}</p>
                                <p><strong>Date & Time:</strong> {{ selectedAppointmentForTreatment.appointment_date }} {{ selectedAppointmentForTreatment.appointment_time }}</p>
                            </div>
                            
                            <div class="mb-3">
                                <label for="treatmentDiagnosis" class="form-label">Diagnosis <span class="text-danger">*</span></label>
                                <textarea 
                                    class="form-control" 
                                    id="treatmentDiagnosis" 
                                    v-model="completeTreatmentForm.diagnosis" 
                                    rows="3" 
                                    placeholder="Enter diagnosis (required)"
                                    required>
                                </textarea>
                            </div>
                            
                            <div class="mb-3">
                                <label for="treatmentPrescription" class="form-label">Prescription</label>
                                <textarea 
                                    class="form-control" 
                                    id="treatmentPrescription" 
                                    v-model="completeTreatmentForm.prescription" 
                                    rows="3" 
                                    placeholder="Enter prescription details">
                                </textarea>
                            </div>
                            
                            <div class="mb-3">
                                <label for="treatmentNotes" class="form-label">Treatment Notes <span class="text-danger">*</span></label>
                                <textarea 
                                    class="form-control" 
                                    id="treatmentNotes" 
                                    v-model="completeTreatmentForm.treatment_notes" 
                                    rows="3" 
                                    placeholder="Enter treatment notes (required)"
                                    required>
                                </textarea>
                            </div>
                            
                            <div class="alert alert-info">
                                <i class="bi bi-info-circle"></i> Both diagnosis and treatment notes are required to complete an appointment.
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                        <button type="button" class="btn btn-success" @click="completeAppointmentWithTreatment()" :disabled="loading">
                            <span v-if="loading" class="spinner-border spinner-border-sm me-2"></span>
                            <i class="bi bi-check"></i> Complete Appointment
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <style>
        /* Non-critical CSS - Can be at bottom */
        #app {
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        
        #app.loaded {
            opacity: 1;
        }
        
        /* Loading overlay for smooth transitions */
        .app-loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #fff;
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>

    <!-- Vue.js 3 -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Razorpay Checkout -->
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <!-- Application Scripts -->
    <script src="/static/js/api.js"></script>
    <script src="/static/js/utils.js"></script>
    <script src="/static/js/admin.js"></script>
    <script src="/static/js/doctor.js"></script>
    <script src="/static/js/patient.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>

